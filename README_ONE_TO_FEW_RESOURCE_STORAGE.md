<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

## ConstructorOptions

### Properties

*   `client` **MongoClient** configured mongo client to use. Can be null if url is set
*   `databaseName` **[string][1]?** name of the mongodb database
*   `collectionName` **[string][1]** name of the mongodb collection used to store the resources
*   `resourceName` **[string][1]** name of the resource e.g. users, customers, topics, shipments

### Examples

```javascript
const { MongoClient } = require('mongodb')
const { OneToFewResourceStorage } = require('@discue/mongodb-resource-client')

const client = new MongoClient(url, {
  serverApi: { version: '1', strict: true, deprecationErrors: true }, // https://www.mongodb.com/docs/manual/reference/stable-api/
})

const oneToFewResourceStorage = new OneToFewResourceStorage({
  client,
  collectionName: 'api_clients',
  resourceName: 'queues'
})
```

## GetOptions

### Properties

*   `withMetadata` **[boolean][2]** true if also meta data should be returned
*   `projection` **[Object][3]** MongoDB projection object e.g. { id: 0, name: 0 }

## OneToFewResourceStorage

Allows to manage a list of documents in another document to e.g. store a list of
students of each school. As the child documents will be embedded, it is easy
to retrieve them (only one query), but harder to get all students across e.g.
a country in various schools.

<strong>Universities collection</strong>

```js
{
  name: 'University Munich',
  students: [
    {
       name: 'Stef',
       city: 'Munich
    },
    {
        name: 'Frank',
       city: 'Stuttgart
    }
  ]
}
```

## get

Returns a resource by ids.

### Parameters

*   `resourceIds` **([String][1] | [Array][4]<[String][1]>)** resource ids that will added to the resource path i.e. /users/${id}/documents/${id}
*   `options` **[GetOptions][5]**&#x20;

Returns **[Promise][6]<[Object][3]>**&#x20;

## getAll

Returns all resources.

### Parameters

*   `resourceIds` **([String][1] | [Array][4]<[String][1]>)** resource ids that will added to the resource path i.e. /users/${id}/documents/${id}
*   `options` **[GetOptions][5]**&#x20;

Returns **[Promise][6]<[Array][4]<[Object][3]>>**&#x20;

## create

Add a resource to a collection by ids.

### Parameters

*   `resourceIds` **([String][1] | [Array][4]<[String][1]>)** resource ids that will added to the resource path i.e. /users/${id}/documents/${id}
*   `resource` **[Object][3]** the resource to be stored

Returns **ObjectId**&#x20;

## update

Updates a resource by ids

### Parameters

*   `resourceIds` **([String][1] | [Array][4]<[String][1]>)** resource ids that will added to the resource path i.e. /users/${id}/documents/${id}
*   `update` **[Object][3]** values that should be updated

Returns **void**&#x20;

## delete

Deletes a resource by ids

### Parameters

*   `resourceIds` **([String][1] | [Array][4]<[String][1]>)** resource ids that will added to the resource path i.e. /users/${id}/documents/${id}

Returns **void**&#x20;

[1]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String

[2]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean

[3]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object

[4]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array

[5]: #getoptions

[6]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise
